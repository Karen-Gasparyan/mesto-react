{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","contexts/SpinnerContext.js","components/spinner/Spinner.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/MessagePopup.js","utils/api.js","components/App.js","index.js"],"names":["Header","React","memo","className","CurrentUserContext","createContext","Card","cardValues","onCardClick","onCardLike","onCardDelete","name","link","likes","owner","_id","currentUser","useContext","isOwn","cardDeleteButtonClassName","isLiked","some","other","cardLikeButtonClassName","src","alt","onError","e","target","onClick","type","aria-label","title","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","cardsError","about","avatar","map","values","Footer","SpinnerContext","Spinner","PopupWithForm","buttonText","children","isOpen","onClose","onSubmit","submitButtonValidation","spinner","noValidate","disabled","EditProfilePopup","onUpdateUser","loading","resetForms","useState","userName","setUserName","userDescription","setUserDescription","userNameError","setUserNameError","userDescriptionError","setUserDescriptionError","userInfoDirty","setUserInfoDirty","validForm","setValidForm","blurHandler","value","useEffect","preventDefault","required","minLength","maxLength","autoComplete","placeholder","id","onChange","onBlur","EditAvatarPopup","onUpdateAvatar","avatarLink","setAvatarLink","avatarLinkError","setAvatarLinkError","avatarLinkDirty","setAvatarLinkDirty","test","AddPlacePopup","setName","setLink","placeNameError","setPlaceNameError","placeLinkError","setPlaceLinkError","placeInfoDirty","setPlaceInfoDirty","ImagePopup","card","MessagePopup","style","margin","textAlign","api","config","this","_url","url","_headers","headers","res","ok","json","Promise","reject","status","fetch","method","then","_checkResponse","body","JSON","stringify","data","authorization","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isMessagePopup","setIsMessagePopup","selectedCard","setSelectedCard","setCards","setCardsError","setResetForms","setCurrentUser","setLoading","messageText","setMessageText","getInitialCards","catch","error","getUserInfo","userData","handleMessagePopup","message","setTimeout","closeAllPopups","Provider","selectedСardLikes","selectedСardID","otherUsers","changeLike","selectedСard","allCards","deleteCard","postDeleted","filter","setUserAvatar","newData","setUserInfo","newPlaceData","setNewCard","newCard","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0d58c2c2.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Header = React.memo(() => {\r\n\r\n  return (\r\n    <div className=\"header page__header\">\r\n      <div className=\"header__logo\"></div>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nconst CurrentUserContext = React.createContext();\r\n\r\nexport default CurrentUserContext;","import React from 'react';\r\n\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\n\r\nfunction Card({cardValues, onCardClick, onCardLike, onCardDelete}) {\r\n  const {name, link, likes, owner, _id} = cardValues;\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const isOwn = owner._id === currentUser._id;\r\n  const cardDeleteButtonClassName = `element__deleted ${isOwn ? 'element__deleted_active' : ''}`;\r\n\r\n  const isLiked = likes.some(other => other._id === currentUser._id);\r\n  const cardLikeButtonClassName = `element__like ${isLiked ? 'element__like_active' : ''}`; \r\n\r\n  \r\n  const handleClick =()=> {\r\n    onCardClick(name, link);\r\n  }\r\n\r\n  const handleLikeClick =()=> {\r\n    onCardLike(likes, _id);\r\n  }\r\n\r\n  const handleDeleteClick =()=> {\r\n    onCardDelete(_id);\r\n  }\r\n\r\n  return (\r\n    <article className=\"element\">\r\n      <img\r\n        src={link}\r\n        alt={name}\r\n        onError={(e)=> e.target.src = 'https://user-images.githubusercontent.com/24848110/33519396-7e56363c-d79d-11e7-969b-09782f5ccbab.png'}\r\n        className=\"element__image\"\r\n        onClick={handleClick} />\r\n      <button\r\n        type=\"button\"\r\n        aria-label=\"Кнопка удаления карточки\"\r\n        title=\"Удалить\"\r\n        className={cardDeleteButtonClassName}\r\n        onClick={handleDeleteClick}>\r\n      </button>\r\n      <div className=\"element__description-wrapper\">\r\n        <h2 className=\"element__title\">{name}</h2>\r\n        <div className=\"element__of-wrapper-likes\">\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Кнопка с отметкой - нравится\"\r\n            title=\"Нравится\"\r\n            className={cardLikeButtonClassName}\r\n            onClick={handleLikeClick}>\r\n          </button>\r\n          <p className=\"element__of-number-likes\">{likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  )\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\n\r\nimport Card from './Card';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\n\r\nfunction Main({\r\n  onEditAvatar,\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onCardClick,\r\n  cards,\r\n  cardsError,\r\n  onCardLike,\r\n  onCardDelete\r\n}) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const {name, about, avatar} = currentUser;\r\n\r\n  return (\r\n    <div className=\"content page__content\">\r\n      <section className=\"profile content__profile\">\r\n        <div className=\"profile__wrapper\">\r\n          <div className=\"profile__avatar-wrapper\">\r\n            <img\r\n              src={avatar}\r\n              alt=\"Аватар\"\r\n              className=\"profile__avatar\" />\r\n            <div\r\n              className=\"profile__edit-avatar\"\r\n              onClick={onEditAvatar}>\r\n            </div>\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <h1 className=\"profile__title\">{name}</h1>\r\n            <button\r\n              type=\"button\"\r\n              className=\"profile__edit-button\"\r\n              aria-label=\"Кнопка - редактировать профиль\"\r\n              onClick={onEditProfile}\r\n            ></button>\r\n            <p className=\"profile__subtitile\">{about}</p>\r\n          </div>\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          className=\"profile__add-button\"\r\n          aria-label=\"Кнопка - добавить карточку с изображением места\"\r\n          onClick={onAddPlace}>\r\n        </button>\r\n      </section>\r\n      <section\r\n        className=\"elements content__elements\"\r\n        aria-label=\"Карточки, с фотографиями мест\" >\r\n          {cardsError || cards.map((values)=>\r\n            (<Card\r\n                key={values._id}\r\n                cardValues={values}\r\n                onCardClick={onCardClick}\r\n                onCardLike={onCardLike}\r\n                onCardDelete={onCardDelete} />)\r\n          )}\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;","import React from 'react';\r\n\r\nconst Footer = React.memo(() => {\r\n\r\n  return (\r\n    <div className=\"footer page__footer\">\r\n      <p className=\"footer__copyright\">&copy; 2021 Mesto Russia</p>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nconst SpinnerContext = React.createContext();\r\n\r\nexport default SpinnerContext;","import React from 'react';\r\n\r\nimport './spinner.css';\r\n\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"loadingio-spinner-spin-fnepk7fl33h\">\r\n      <div className=\"ldio-gqe9nbj4c1\">\r\n        <div><div></div></div>\r\n        <div><div></div></div>\r\n        <div><div></div></div>\r\n        <div><div></div></div>\r\n        <div><div></div></div>\r\n        <div><div></div></div>\r\n        <div><div></div></div>\r\n        <div><div></div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;","import React from 'react';\r\n\r\nimport SpinnerContext from '../contexts/SpinnerContext';\r\nimport Spinner from './spinner/Spinner';\r\n\r\n\r\nfunction PopupWithForm({\r\n  title,\r\n  name,\r\n  buttonText, \r\n  children,\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  submitButtonValidation\r\n}) {\r\n  const spinner = React.useContext(SpinnerContext);\r\n\r\n  return(\r\n    <div className={`pop-up pop-up_${name} ${isOpen ? 'pop-up_opened' : ''}`}>\r\n        <div className=\"pop-up__container\">\r\n          <form\r\n            className=\"pop-up__form\"\r\n            name={name}\r\n            onSubmit={onSubmit}\r\n            noValidate>\r\n            <h2 className=\"pop-up__title\">{title}</h2>\r\n            {children}\r\n            <button\r\n              type=\"submit\"\r\n              aria-label=\"Кнопка отправки формы\"\r\n              className={`pop-up__save-btn ${!submitButtonValidation ? 'pop-up__save-btn_invalid' : '' }`}\r\n              disabled={!submitButtonValidation} >\r\n              {buttonText}\r\n              {spinner ? <Spinner /> : null}\r\n            </button>\r\n          </form>\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Кнопка закрытия модального окна\"\r\n            title=\"Закрыть\"\r\n            className=\"pop-up__close-btn\"\r\n            onClick={onClose}\r\n          >\r\n          </button>\r\n      </div>\r\n  </div>\r\n  )\r\n}\r\n\r\nexport default PopupWithForm;","import React, {useState, useEffect} from 'react';\r\n\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\n\r\nfunction EditProfilePopup({\r\n  isOpen,\r\n  onClose,\r\n  onUpdateUser,\r\n  loading,\r\n  resetForms\r\n}) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const [userName, setUserName] = useState('');\r\n  const [userDescription, setUserDescription] = useState('');\r\n  \r\n  const [userNameError, setUserNameError] = useState('');\r\n  const [userDescriptionError, setUserDescriptionError] = useState('');\r\n\r\n  const [userInfoDirty, setUserInfoDirty] = useState(false);\r\n  const [validForm, setValidForm] = useState(false);\r\n\r\n\r\n  useEffect(()=> {\r\n    setUserName(currentUser.name);\r\n    setUserDescription(currentUser.about);\r\n  }, [currentUser, isOpen]);\r\n\r\n\r\n  useEffect(()=> {\r\n    if(!userName || !userDescription || userNameError || userDescriptionError) {\r\n      setValidForm(false);\r\n    } else {\r\n      setValidForm(true);\r\n    }\r\n  }, [userName, userDescription, userNameError, userDescriptionError])\r\n\r\n\r\n  useEffect(()=> {\r\n    if(resetForms) {\r\n      setUserNameError('');\r\n      setUserDescriptionError('');\r\n      setUserInfoDirty(false);\r\n      setValidForm(false);\r\n    }\r\n  }, [resetForms])\r\n\r\n\r\n  function handleChangeName(e) {\r\n    setUserName(e.target.value);\r\n\r\n    if(e.target.value.length < 2 || e.target.value.length >= 20) {\r\n      setUserNameError('Имя не может содержать менее 2 и более 20 символов');\r\n      setUserInfoDirty(true);\r\n    } else {\r\n      setUserNameError('');\r\n    }\r\n  };\r\n\r\n\r\n  function handleChangeDescription(e) {\r\n    setUserDescription(e.target.value);\r\n\r\n    if(e.target.value.length < 2 || e.target.value.length >= 200) {\r\n      setUserDescriptionError('Поле не может содержать менее 2 и более 200 символов');\r\n      setUserInfoDirty(true);\r\n    } else {\r\n      setUserDescriptionError('');\r\n    }\r\n  };\r\n\r\n  \r\n  function blurHandler(e) {\r\n    if (!e.target.value && e.target.name === 'userName') {\r\n      setUserNameError('Поле не может быть пустым');\r\n    } else if (!e.target.value && e.target.name === 'userAbout') {\r\n      setUserDescriptionError('Поле не может быть пустым');\r\n    }\r\n  };\r\n\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    onUpdateUser({\r\n      userName,\r\n      about: userDescription,\r\n    });\r\n  };\r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title={'Редактировать профиль'}\r\n      name={'edit'}\r\n      buttonText={loading ? 'Сохранение...' : 'Сохранить'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      submitButtonValidation={validForm} >\r\n        <div className=\"pop-up__input-wrapper\">\r\n          <input\r\n            name=\"userName\"\r\n            value={userName || ''}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"20\"\r\n            autoComplete=\"off\"\r\n            placeholder=\"Введите ваше имя\"\r\n            type=\"text\"\r\n            className=\"pop-up__input-text pop-up__input-text_type_name\"\r\n            id=\"userName\"\r\n            onChange={handleChangeName}\r\n            onBlur={blurHandler} />\r\n          {(userInfoDirty && userNameError) && <span id=\"userName-error\" className=\"error\">{userNameError}</span> }\r\n        </div>\r\n        <div className=\"pop-up__input-wrapper\">\r\n          <input\r\n            name=\"userAbout\"\r\n            value={userDescription || ''}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"200\"\r\n            autoComplete=\"off\"\r\n            placeholder=\"Введите вашу специальность\"\r\n            type=\"text\"\r\n            className=\"pop-up__input-text pop-up__input-text_type_about\"\r\n            id=\"userAbout\"\r\n            onChange={handleChangeDescription}\r\n            onBlur={blurHandler} />\r\n          {(userInfoDirty && userDescriptionError) && <span id=\"userAbout-error\" className=\"error\">{userDescriptionError}</span> }\r\n        </div>\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default EditProfilePopup;","import React, { useState, useEffect } from 'react';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\n\r\nfunction EditAvatarPopup({\r\n  isOpen,\r\n  onClose,\r\n  onUpdateAvatar,\r\n  loading,\r\n  resetForms\r\n}) {\r\n  const [avatarLink, setAvatarLink] = useState('');\r\n  const [avatarLinkError, setAvatarLinkError] = useState('');\r\n  const [avatarLinkDirty, setAvatarLinkDirty] = useState(false);\r\n  const [validForm, setValidForm] = useState(false);\r\n\r\n  \r\n  useEffect(()=> {\r\n    if(resetForms) {\r\n      setAvatarLink('');\r\n      setAvatarLinkError('');\r\n      setAvatarLinkDirty(false);\r\n      setValidForm(false);\r\n    }\r\n  }, [resetForms])\r\n\r\n\r\n  useEffect(()=> {\r\n    if(!avatarLink || avatarLinkError) {\r\n      setValidForm(false);\r\n    } else {\r\n      setValidForm(true);\r\n    }\r\n  }, [avatarLink, avatarLinkError])\r\n\r\n\r\n  function handleChangeLinkInputValue(e) {\r\n    setAvatarLink(e.target.value);\r\n\r\n    const valid = /^(ftp|http|https):\\/\\/[^ \"]+$/.test(e.target.value);\r\n\r\n    if(!valid) {\r\n      setAvatarLinkError('Введите URL');\r\n      setAvatarLinkDirty(true);\r\n    } else {\r\n      setAvatarLinkError('');\r\n      setAvatarLinkDirty(false);\r\n      setValidForm(true);\r\n    }\r\n  };\r\n\r\n\r\n  function blurHandler(e) {\r\n    if (!e.target.value) {\r\n      setAvatarLinkError('Поле не может быть пустым');\r\n    }\r\n  };\r\n\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar(avatarLink);\r\n\r\n    setAvatarLink('');\r\n  };\r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title={'Обновить аватар'}\r\n      name={'change-avatar'}\r\n      buttonText={loading ? 'Сохранение...' : 'Сохранить'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      submitButtonValidation={validForm} >\r\n        <div className=\"pop-up__input-wrapper\">\r\n          <input\r\n            name=\"linkToAvatar\"\r\n            required\r\n            autoComplete=\"off\"\r\n            placeholder=\"Ссылка на картинку\"\r\n            type=\"url\"\r\n            className=\"pop-up__input-text pop-up__input-text_type_link\"\r\n            id=\"linkToAvatar\"\r\n            value={avatarLink}\r\n            onChange={handleChangeLinkInputValue}\r\n            onBlur={blurHandler}\r\n          />\r\n          {(avatarLinkDirty && avatarLinkError) && <span id=\"linkToAvatar-error\" className=\"error\">{avatarLinkError}</span> }\r\n        </div>\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default EditAvatarPopup;","import React, { useState, useEffect } from 'react';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\n\r\nfunction AddPlacePopup({\r\n  isOpen,\r\n  onClose,\r\n  onAddPlace,\r\n  loading,\r\n  resetForms\r\n}) {\r\n  const [name, setName] = useState('');\r\n  const [link, setLink] = useState('');\r\n\r\n              /*        Спасибо за отличное ревью! За замечание по поводу валидации.\r\n                        Разберусь с ней чуть позже, иначе ничего не успею ;).          */\r\n\r\n  const [placeNameError, setPlaceNameError] = useState('');\r\n  const [placeLinkError, setPlaceLinkError] = useState('');\r\n\r\n  const [placeInfoDirty, setPlaceInfoDirty] = useState(false);\r\n  const [validForm, setValidForm] = useState(false);\r\n\r\n\r\n  useEffect(()=> {\r\n    if(!name || !link || placeNameError || placeLinkError) {\r\n      setValidForm(false);\r\n    } else {\r\n      setValidForm(true);\r\n    }\r\n  }, [name, link, placeNameError, placeLinkError])\r\n\r\n\r\n  useEffect(()=> {\r\n    if(resetForms) {\r\n      setName('');\r\n      setLink('');\r\n      setPlaceNameError('');\r\n      setPlaceLinkError('');\r\n      setPlaceInfoDirty(false);\r\n      setValidForm(false);\r\n    }\r\n  }, [resetForms])\r\n\r\n\r\n  function handleChangePlaceTitle(e) {\r\n    setName(e.target.value);\r\n\r\n    if(e.target.value.length < 2 || e.target.value.length >= 30) {\r\n      setPlaceNameError('Название не может содержать менее 2 и более 30 символов');\r\n      setPlaceInfoDirty(true);\r\n    } else {\r\n      setPlaceNameError('');\r\n    }\r\n  };\r\n\r\n\r\n  function handleChangePlaceLink(e) {\r\n    setLink(e.target.value);\r\n\r\n    const valid = /^(ftp|http|https):\\/\\/[^ \"]+$/.test(e.target.value);\r\n\r\n    if(!valid) {\r\n      setPlaceLinkError('Введите URL');\r\n      setPlaceInfoDirty(true);\r\n    } else {\r\n      setPlaceLinkError('');\r\n      setPlaceInfoDirty(false);\r\n      setValidForm(true);\r\n    }\r\n  };\r\n\r\n\r\n  function blurHandler(e) {\r\n    if (!e.target.value && e.target.name === 'placeTitle') {\r\n      setPlaceNameError('Поле не может быть пустым');\r\n    } else if (!e.target.value && e.target.name === 'placeLink') {\r\n      setPlaceLinkError('Поле не может быть пустым');\r\n    }\r\n  };\r\n\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    onAddPlace({name, link});\r\n    setName('');\r\n    setLink('');\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title={'Новое место'}\r\n      name={'img'}\r\n      buttonText={loading ? 'Создается...' : 'Создать'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      submitButtonValidation={validForm} >\r\n        <div className=\"pop-up__input-wrapper\">\r\n          <input\r\n            name=\"placeTitle\"\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"30\"\r\n            autoComplete=\"off\"\r\n            placeholder=\"Название\"\r\n            type=\"text\"\r\n            className=\"pop-up__input-text pop-up__input-text_type_title\"\r\n            id=\"placeName\"\r\n            value={name}\r\n            onChange={handleChangePlaceTitle}\r\n            onBlur={blurHandler}\r\n          />\r\n          {(placeInfoDirty && placeNameError) && <span id=\"placeName-error\" className=\"error\">{placeNameError}</span> }\r\n        </div>\r\n        <div className=\"pop-up__input-wrapper\">\r\n          <input\r\n            name=\"placeLink\"\r\n            required\r\n            autoComplete=\"off\"\r\n            placeholder=\"Ссылка на картинку\"\r\n            type=\"url\"\r\n            className=\"pop-up__input-text pop-up__input-text_type_link\"\r\n            id=\"linkToImage\"\r\n            value={link}\r\n            onChange={handleChangePlaceLink}\r\n            onBlur={blurHandler}\r\n          />\r\n          {(placeInfoDirty && placeLinkError) && <span id=\"linkToImage-error\" className=\"error\">{placeLinkError}</span> }\r\n        </div>\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\n\r\nfunction ImagePopup({card: {isOpen, name, link}, onClose}) {\r\n\r\n  return (\r\n    <div className={`pop-up pop-up_fullscreen ${isOpen ? 'pop-up_opened' : ''}`}>\r\n      <div className=\"pop-up__container-fullscreen\">\r\n        <img\r\n          src={link}\r\n          alt=\"Карточка места\"\r\n          className=\"pop-up__image-fullscreen\"\r\n        />\r\n        <p className=\"pop-up__captiion-fullscreen\">{name}</p>\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"Кнопка закрытия модального окна\"\r\n          title=\"Закрыть\"\r\n          className=\"pop-up__close-btn\"\r\n          onClick={onClose}\r\n        ></button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\n\r\nconst MessagePopup = React.memo(({title, isOpen}) => {\r\n\r\n  return (\r\n    <div className={`pop-up ${isOpen ? 'pop-up_opened' : ''}`}>\r\n        <div className=\"pop-up__container\">\r\n          <h2\r\n            className=\"pop-up__title\"\r\n            style={{margin: '0', textAlign: 'center'}} >\r\n            {title}\r\n          </h2>\r\n      </div>\r\n  </div>\r\n  );\r\n})\r\n\r\nexport default MessagePopup;","class Api {\r\n  constructor(config) {\r\n    this._url = config.url;\r\n    this._headers = config.headers;\r\n  };\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`Error: ${res.status}`);\r\n    }\r\n  };\r\n\r\n  /* GET */\r\n  getInitialCards() {\r\n    return fetch(`${this._url}cards`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n    .then(this._checkResponse)\r\n  };\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._url}users/me`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n    .then(this._checkResponse)\r\n  };\r\n  /* /GET */\r\n\r\n\r\n  /* SET */\r\n  setUserAvatar(link) {\r\n    return fetch(`${this._url}users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({ avatar: link })\r\n    })\r\n    .then(this._checkResponse)\r\n  };\r\n\r\n  setUserInfo(name, about) {\r\n    return fetch(`${this._url}users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({ name, about })\r\n    })\r\n    .then(this._checkResponse)\r\n  };\r\n\r\n  setNewCard(data) {\r\n    return fetch(`${this._url}cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify(data)\r\n    })\r\n    .then(this._checkResponse)\r\n  };\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._url}cards/${id}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n      body: JSON.stringify({ _id: id })\r\n    })\r\n    .then(this._checkResponse)\r\n  };\r\n\r\n  changeLike(id, isLiked) {\r\n    if(isLiked) {\r\n      return fetch(`${this._url}cards/likes/${id}`, {\r\n      method: 'PUT',\r\n      headers: this._headers,\r\n      body: JSON.stringify({ _id: id })\r\n    })\r\n      .then(this._checkResponse)\r\n    } else {\r\n        return fetch(`${this._url}cards/likes/${id}`, {\r\n          method: 'DELETE',\r\n          headers: this._headers,\r\n          body: JSON.stringify({ _id: id })\r\n        })\r\n          .then(this._checkResponse)\r\n    }\r\n  }\r\n  /* /SET */\r\n};\r\n\r\nconst api = new Api({\r\n  url: 'https://mesto.nomoreparties.co/v1/cohort-22/',\r\n  headers: {\r\n    authorization: 'fc55fa6a-67b0-4119-9d98-e2f765087414',\r\n    'Content-Type': 'application/json; charset=UTF-8'\r\n  }\r\n});\r\n\r\nexport default api;","import React, {useState, useEffect} from 'react';\r\n\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\n\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ImagePopup from './ImagePopup';\r\nimport MessagePopup from './MessagePopup';\r\n\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\nimport SpinnerContext from '../contexts/SpinnerContext';\r\nimport api from '../utils/api';\r\n\r\n\r\nfunction App() {\r\n\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isMessagePopup, setIsMessagePopup] = useState(false);\r\n\r\n  const [selectedCard, setSelectedCard] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const [cardsError, setCardsError] = useState(null);\r\n\r\n  const [resetForms, setResetForms] = useState(false);\r\n  const [currentUser, setCurrentUser ] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [messageText, setMessageText] = useState('');\r\n\r\n\r\n  /* cards */\r\n  useEffect(()=> {\r\n    api.getInitialCards()\r\n      .then(data => setCards(data))\r\n      .catch(error => setCardsError(`${error} - Something went wrong`));\r\n  }, []);\r\n\r\n\r\n  function handleCardLike(selectedСardLikes, selectedСardID) {\r\n    const isLiked = selectedСardLikes.some(otherUsers => otherUsers._id === currentUser._id);\r\n    \r\n    api.changeLike(selectedСardID, !isLiked)\r\n      .then(selectedСard => {\r\n        setCards(allCards => allCards.map(card => card._id === selectedСardID ? selectedСard : card));\r\n    })\r\n    .catch(error => handleMessagePopup(`Something went wrong - ${error}`));\r\n  };\r\n\r\n\r\n  function handleCardDelete(selectedСardID) {\r\n    api.deleteCard(selectedСardID)\r\n      .then(postDeleted => {\r\n        setCards(allCards => allCards.filter(card => card._id !== selectedСardID));\r\n        if(postDeleted) return handleMessagePopup('Пост успешно удален');\r\n      })\r\n      .catch(error => handleMessagePopup(`Something went wrong - ${error}`));\r\n  };\r\n\r\n\r\n  function handleAddPlaceSubmit(newPlaceData) {\r\n    setLoading(true);\r\n\r\n    api.setNewCard(newPlaceData)\r\n      .then(newCard => {\r\n        setCards([newCard, ...cards]);\r\n        setLoading(false);\r\n        closeAllPopups();\r\n      })\r\n      .catch(error => {\r\n        handleMessagePopup(`Something went wrong - ${error}`);\r\n        setLoading(false);\r\n      });\r\n  };\r\n  /* /cards */\r\n\r\n\r\n  /* user info */\r\n  useEffect(()=> {\r\n    api.getUserInfo()\r\n      .then(userData => {\r\n        setCurrentUser(userData);\r\n      })\r\n      .catch(error => {\r\n        setCurrentUser({\r\n          name: error,\r\n          about: 'Something went wrong',\r\n          avatar: 'https://www.wpfixit.com/wp-content/uploads/2019/03/HTTP-error-when-uploading-images-in-WordPress.jpg'\r\n        })\r\n      });\r\n  }, []);\r\n\r\n\r\n  function handleUpdateAvatar(link) {\r\n    setLoading(true);\r\n\r\n    api.setUserAvatar(link)\r\n      .then(newData => {\r\n        setCurrentUser(newData);\r\n        setLoading(false);\r\n        closeAllPopups();\r\n      })\r\n      .catch(error => {\r\n        handleMessagePopup(`Something went wrong - ${error}`);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n\r\n  function handleUpdateUser({userName, about}) {\r\n    setLoading(true);\r\n\r\n    api.setUserInfo(userName, about)\r\n      .then(newData => {\r\n        setCurrentUser(newData);\r\n        setLoading(false);\r\n        closeAllPopups();\r\n      })\r\n      .catch(error => {\r\n        handleMessagePopup(`Something went wrong - ${error}`);\r\n        setLoading(false);\r\n      });\r\n  };\r\n  /* /user info */\r\n\r\n\r\n  /* popup's */\r\n  const handleEditAvatarClick =()=> {\r\n    setIsEditAvatarPopupOpen(true);\r\n    setResetForms(false);\r\n  };\r\n\r\n  const handleEditProfileClick =()=> {\r\n    setIsEditProfilePopupOpen(true);\r\n    setResetForms(false);\r\n  };\r\n\r\n  const handleAddPlaceClick =()=> {\r\n    setIsAddPlacePopupOpen(true);\r\n    setResetForms(false);\r\n  };\r\n\r\n  const handleMessagePopup =(message)=> {\r\n    setIsMessagePopup(true);\r\n    setMessageText(message);\r\n\r\n    const hideMessage =()=> {\r\n      setIsMessagePopup(false);\r\n    }\r\n\r\n    setTimeout(hideMessage, 1500);\r\n  }\r\n\r\n  const handleCardClick =(name, link)=> {\r\n    setSelectedCard({\r\n      isOpen: true,\r\n      name,\r\n      link\r\n    });\r\n  };\r\n\r\n  const closeAllPopups =()=> {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n\r\n    setSelectedCard({});\r\n    setLoading(false);\r\n    setResetForms(true);\r\n  };\r\n  /* /popup's */\r\n\r\n  return (\r\n    <SpinnerContext.Provider value={loading} >\r\n      <CurrentUserContext.Provider value={currentUser} >\r\n        <div className=\"body\">\r\n          <div className=\"page\">\r\n            <Header />\r\n\r\n            <Main\r\n              onEditAvatar={handleEditAvatarClick}\r\n              onEditProfile={handleEditProfileClick}\r\n              onAddPlace={handleAddPlaceClick}\r\n              onCardClick={handleCardClick} \r\n              cards={cards}\r\n              cardsError={cardsError}\r\n              onCardLike={handleCardLike}\r\n              onCardDelete={handleCardDelete} />\r\n\r\n            <EditAvatarPopup\r\n              isOpen={isEditAvatarPopupOpen}\r\n              onClose={closeAllPopups}\r\n              onUpdateAvatar={handleUpdateAvatar}\r\n              loading={loading}\r\n              resetForms={resetForms} />\r\n            \r\n            <EditProfilePopup\r\n              isOpen={isEditProfilePopupOpen}\r\n              onClose={closeAllPopups}\r\n              onUpdateUser={handleUpdateUser}\r\n              loading={loading}\r\n              resetForms={resetForms} /> \r\n\r\n            <AddPlacePopup\r\n              isOpen={isAddPlacePopupOpen}\r\n              onClose={closeAllPopups}\r\n              onAddPlace={handleAddPlaceSubmit}\r\n              loading={loading}\r\n              resetForms={resetForms} />\r\n\r\n            <ImagePopup\r\n              card={selectedCard}\r\n              onClose={closeAllPopups} />\r\n\r\n            <MessagePopup\r\n              title={messageText}\r\n              isOpen={isMessagePopup}/>\r\n\r\n            <Footer />\r\n          </div>\r\n        </div>\r\n      </CurrentUserContext.Provider>\r\n    </SpinnerContext.Provider>\r\n  );\r\n};\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}